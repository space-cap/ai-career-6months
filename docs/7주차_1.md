좋아요 🔥
이제 **7주차 – “AI 인사이트 & 대화 데이터 시각화 단계”**예요.
이 시점부터는 단순히 “대화 저장”이나 “맞춤 대답”을 넘어서,
**AI가 나의 대화 데이터를 분석하고 시각적으로 보여주는 단계**로 발전합니다.

즉,

> “AI가 나를 이해한 다음,
> 내가 어떤 사람인지 — 어떤 패턴과 관심사를 가졌는지를 **보여주는 시점**”
> 으로 가는 거예요.

---

# 📊 Week 7 : AI 인사이트 & 대화 데이터 시각화

> 🎯 **목표:**
> 저장된 대화 데이터를 기반으로
> 일별 대화 수, 주요 주제, 감정 분석 등을 수행하고
> React 대시보드에서 시각화한다.
>
> 🗓 **기간:** 7주차 (Day 43 ~ 49)
> 💡 **주제:** “AI가 나를 분석해 보여주다”

---

## 📅 **7주차 일정표**

| Day           | 주요 목표          | 세부 내용                                                             | 결과물              |
| ------------- | -------------- | ----------------------------------------------------------------- | ---------------- |
| **43일차**      | 데이터 분석 구조      | - 대화 로그 집계 SQL 작성<br>- 날짜별, 사용자별 통계                               | 데이터 분석 기본 쿼리     |
| **44일차**      | 주제 & 감정 분류     | - OpenAI 모델로 감정(Sentiment) 분석<br>- 주제별 키워드 추출                     | 대화 분류 테이블        |
| **45일차**      | FastAPI 분석 API | - `/api/insights/stats` (통계)<br>- `/api/insights/topics` (주제별 분석) | 분석용 REST API     |
| **46~47일차**   | React 대시보드 구축  | - Recharts / Chart.js 기반 시각화<br>- 일별 대화 수 그래프, 감정 비율 차트           | 시각화 UI 완성        |
| **48일차**      | “나의 대화 리포트” 생성 | - ChatGPT API로 요약 리포트 생성<br>- “한 주 대화 요약” 기능                      | AI 기반 요약 리포트     |
| **49일차 (회고)** | 정리 & 배포        | - 프론트/백엔드 통합 테스트<br>- README에 스크린샷 추가                             | 데이터 인사이트 대시보드 완성 |

---

## ✅ **체크리스트**

* [ ] 일별 대화 수 SQL 쿼리 작성
* [ ] 주요 주제 및 감정 분석 로직 구현
* [ ] `/api/insights/*` API 엔드포인트 구축
* [ ] Chart.js 또는 Recharts로 시각화
* [ ] “한 주 요약 리포트” 생성 기능 구현
* [ ] README에 스크린샷 및 예시 그래프 추가

---

## 🧠 **분석 항목 예시**

| 항목         | 설명                                   |
| ---------- | ------------------------------------ |
| 📅 일별 대화 수 | `COUNT(*) GROUP BY DATE(created_at)` |
| 💬 상위 키워드  | 질문 내용에서 TF-IDF or GPT 요약 추출          |
| 😊 감정 분석   | 긍정 / 중립 / 부정 비율                      |
| 🧩 주제 분류   | “AI”, “커리어”, “프론트엔드” 등               |
| 🧭 대화 길이   | 평균 Q/A 글자 수                          |
| 🪞 요약 리포트  | “이번 주 당신은 AI 커리어에 대한 질문이 많았어요”       |

---

## 💻 **FastAPI 예시 API**

📁 `app/routers/insights.py`

```python
from fastapi import APIRouter
from sqlalchemy import func
from app.database import SessionLocal
from app.models.conversation_log import ConversationLog

router = APIRouter()

@router.get("/insights/stats")
def get_stats():
    db = SessionLocal()
    result = (
        db.query(
            func.date(ConversationLog.created_at).label("date"),
            func.count().label("count")
        )
        .group_by(func.date(ConversationLog.created_at))
        .all()
    )
    db.close()
    return [{"date": str(r.date), "count": r.count} for r in result]
```

---

📁 `app/services/analyzer.py`

```python
from langchain.chat_models import ChatOpenAI

def analyze_sentiment(text):
    llm = ChatOpenAI(model="gpt-4o-mini")
    prompt = f"다음 문장의 감정을 '긍정', '중립', '부정' 중 하나로 분류해줘:\n{text}"
    response = llm.invoke(prompt)
    return response.content.strip()
```

---

## 📈 **React 대시보드 예시**

📁 `frontend/src/pages/Dashboard.jsx`

```jsx
import { useEffect, useState } from "react";
import { LineChart, Line, XAxis, YAxis, Tooltip, CartesianGrid } from "recharts";
import axios from "axios";

export default function Dashboard() {
  const [stats, setStats] = useState([]);

  useEffect(() => {
    axios.get("/api/insights/stats").then((res) => setStats(res.data));
  }, []);

  return (
    <div className="p-6">
      <h2 className="text-2xl font-bold mb-4">📊 나의 대화 데이터</h2>
      <LineChart width={600} height={300} data={stats}>
        <XAxis dataKey="date" />
        <YAxis />
        <CartesianGrid stroke="#ccc" />
        <Line type="monotone" dataKey="count" stroke="#3b82f6" />
        <Tooltip />
      </LineChart>
    </div>
  );
}
```

---

## 🧩 **추가 확장 아이디어**

| 기능                 | 설명                     |
| ------------------ | ---------------------- |
| 🕰 “오늘의 AI 사용 시간”  | 대화 시간대 분석              |
| 📋 “내 질문 주제 Top 3” | AI가 자동 요약              |
| 🧮 “대화 패턴 분석”      | 긍정 vs 부정, 기술 vs 커리어    |
| 🧾 “PDF 리포트 생성”    | 1주 대화 리포트를 PDF로 export |
| 🔄 “리포트 자동 발송”     | 매주 월요일 자동 리포트 생성       |

---

## 🪞 **회고 템플릿**

> 🔹 내 대화 데이터를 시각화하니 어떤 느낌이었나?
> 🔹 어떤 인사이트가 가장 흥미로웠는가?
> 🔹 데이터 시각화 중 어려웠던 점은?
> 🔹 8주차에는 어떤 자동화 기능을 추가하고 싶은가?

---

## 🏁 **7주차 종료 기준**

✅ 대화 로그 통계 쿼리 완료
✅ 감정/주제 분석 기능 동작
✅ `/api/insights/*` API 정상 응답
✅ React 대시보드 시각화 작동
✅ README에 리포트 스크린샷 포함

→ **“AI가 나를 분석하는 단계” 완성 🎯**
