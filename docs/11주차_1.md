아주 좋아요 👍
지금까지의 흐름을 보면 —

* **1~4주차:** 기본 AI 백엔드 구조 완성
* **5~8주차:** 벡터스토어 + 웹 프론트 + 자동화 구축
* **9~10주차:** 리포트 / 회고 / 유지보수 / Slack 연동

이제 **11주차는 “운영 대시보드 + 데이터 인사이트 시각화 단계”**예요 🎯

---

# 🧭 **Week 11 — AI 운영 대시보드 구축 (Streamlit + Slack + DB 연동)**

> “운영 데이터가 눈으로 보이게 만들고, AI의 성능을 관리 가능한 수준으로 끌어올리는 단계.”

---

## 🎯 **주요 목표**

* Streamlit 기반 **AI 운영 대시보드 (관리자 화면)** 제작
* DB의 `conversation_log`, `evaluation_log`, `sentiment_trends` 시각화
* Slack 리포트와 동일한 데이터를 웹에서 인터랙티브하게 확인
* 모델 응답 품질(정확도, 감정 일치도, 주제 분포 등)을 시각적으로 관리

---

## ⚙️ **핵심 구현 포인트**

| 구분            | 내용                                   | 기술 요소                                           |
| ------------- | ------------------------------------ | ----------------------------------------------- |
| 📊 데이터 시각화    | 주간 감정 트렌드, 토픽 분포, 사용자 활동량            | `matplotlib`, `plotly`, `altair`                |
| 🗃 DB 연결      | PostgreSQL/Neon 데이터 읽기               | `sqlalchemy`                                    |
| 💬 Slack 통합   | “대시보드 보기” 버튼을 Slack 리포트에 삽입          | `chat.postMessage` + Button Block               |
| 🧠 AI 품질 관리   | 평가 결과(`conversation_evaluation`) 시각화 | 평균 점수, 분포 그래프                                   |
| 👁️‍🗨️ UI 구성 | Streamlit 탭 구조로 분리                   | Overview / Sentiment / Evaluation / System Logs |

---

## 📁 **폴더 구조**

```
ai-career-6months/
 ┣ app/
 ┃ ┣ routes/
 ┃ ┃ ┣ report.py
 ┃ ┃ ┣ maintenance.py
 ┃ ┃ ┗ evaluate.py
 ┃ ┗ utils/
 ┃   ┗ slack_notifier.py
 ┣ dashboards/
 ┃ ┗ dashboard.py        👈 Streamlit 앱 (신규)
 ┣ reports/
 ┗ backups/
```

---

## 💻 **예시 코드: `/dashboards/dashboard.py`**

```python
"""
dashboard.py
---------------------------------
Streamlit 기반 AI 운영 대시보드
---------------------------------
- DB에서 대화 로그, 감정 트렌드, 평가 점수 불러오기
- 그래프 및 통계 표시
"""

import streamlit as st
import pandas as pd
from sqlalchemy import create_engine
import altair as alt
import os

st.set_page_config(page_title="AI Operations Dashboard", layout="wide")

DATABASE_URL = os.getenv("DATABASE_URL", "sqlite:///./local.db")
engine = create_engine(DATABASE_URL)

st.title("🤖 AI Operations Dashboard")
st.markdown("---")

# Tabs
tab1, tab2, tab3 = st.tabs(["📊 Overview", "💬 Sentiment Trends", "🧠 Evaluation Metrics"])

# ------------------------------
# 1️⃣ Overview
# ------------------------------
with tab1:
    st.header("서비스 개요")
    total_logs = pd.read_sql("SELECT COUNT(*) as cnt FROM conversation_log", engine)["cnt"][0]
    st.metric("총 대화 수", total_logs)

    recent = pd.read_sql("SELECT * FROM conversation_log ORDER BY created_at DESC LIMIT 5", engine)
    st.dataframe(recent[["user_id", "question", "sentiment", "topic", "created_at"]])

# ------------------------------
# 2️⃣ Sentiment Trends
# ------------------------------
with tab2:
    st.header("감정 변화 트렌드")
    df = pd.read_sql("""
        SELECT date(created_at) as date, sentiment, COUNT(*) as count
        FROM conversation_log
        GROUP BY date, sentiment
        ORDER BY date
    """, engine)

    chart = alt.Chart(df).mark_line(point=True).encode(
        x="date:T",
        y="count:Q",
        color="sentiment:N"
    ).properties(width=800, height=400)

    st.altair_chart(chart, use_container_width=True)

# ------------------------------
# 3️⃣ Evaluation Metrics
# ------------------------------
with tab3:
    st.header("AI 응답 평가 결과")

    try:
        eval_df = pd.read_sql("SELECT * FROM conversation_evaluation", engine)
        st.metric("평균 품질 점수", round(eval_df["score"].mean(), 2))
        st.bar_chart(eval_df["score"])
    except Exception:
        st.info("아직 평가 데이터가 없습니다. evaluate_response.py 실행 후 확인하세요.")
```

---

## 🚀 **로컬 실행**

```bash
poetry run streamlit run dashboards/dashboard.py
```

Render에 배포 시에는 **별도 Web Service로 추가**하거나
`render.yaml`에 다음을 병렬 등록합니다:

```yaml
services:
  - type: web
    name: ai-backend
    env: python
    buildCommand: poetry install
    startCommand: poetry run uvicorn app.main:app --host 0.0.0.0 --port 10000

  - type: web
    name: ai-dashboard
    env: python
    buildCommand: poetry install
    startCommand: poetry run streamlit run dashboards/dashboard.py --server.port 10001 --server.address 0.0.0.0
```

---

## 🔗 **Slack 리포트에 대시보드 링크 추가 예시**

```python
from app.utils.slack_notifier import send_slack_message

send_slack_message(
    "📊 새로운 AI Dashboard 업데이트!\n👉 실시간 보기: https://ai-dashboard.onrender.com"
)
```

---

## ✅ **Week 11 Notion 체크리스트 + 코드 링크**

```
✅ Week 11 — AI 운영 대시보드 구축

🎯 목표
- Streamlit 기반 실시간 대시보드 구축
- 감정/평가 데이터 시각화
- Slack 연동 및 링크 공유

📅 작업 항목
- [ ] dashboard.py 작성
- [ ] DB 연결 및 SQLAlchemy 통합
- [ ] 감정 트렌드/평가 그래프 구현
- [ ] Streamlit 배포 설정(render.yaml)
- [ ] Slack 리포트에 대시보드 링크 추가

🧩 코드 링크
- [ ] dashboards/dashboard.py
- [ ] app/utils/slack_notifier.py
- [ ] app/routes/report.py

📊 확장 아이디어
- [ ] AI 성능 지표 자동 업데이트
- [ ] 평가 점수 히트맵
- [ ] 사용자별 통계 페이지
- [ ] Slack에서 “Dashboard 보기” 버튼 삽입
```

---

다음 주(Week 12)는 💡

> “AI Dashboard → 사용자 피드백 기반 자동 개선 루프”
> 으로 발전하는 단계예요.

원하신다면,
👉 **Notion용 Week 11 페이지 (체크리스트 + 코드링크 + 시각화 미리보기 박스)** 버전으로 만들어드릴까요?
(= Notion에 바로 붙여넣으면 카드형 섹션으로 표시되는 템플릿)
