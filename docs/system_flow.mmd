flowchart TB
    %% ========================================
    %% AI Career 6 Months - System Architecture
    %% ========================================

    subgraph "ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤"
        User[ğŸ‘¤ ì‚¬ìš©ì]
        SlackUser[ğŸ’¬ Slack ì‚¬ìš©ì]
        WebUI[ğŸŒ React Frontend]
    end

    subgraph "FastAPI Backend"
        direction TB

        subgraph "API ë¼ìš°í„°"
            ChatAPI["/api/chat<br/>ê¸°ë³¸ ì±„íŒ…"]
            RAGChatAPI["/api/rag-chat<br/>RAG ì±„íŒ…"]
            PersonalAPI["/api/personal-chat<br/>ê°œì¸í™” ì±„íŒ…"]
            IngestAPI["/api/ingest<br/>ë¬¸ì„œ ì„ë² ë”©"]
            FeedbackAPI["/api/feedback<br/>í”¼ë“œë°± ìˆ˜ì§‘"]
            InsightsAPI["/api/insights<br/>ë¶„ì„ ê²°ê³¼"]
            ReportAPI["/api/report<br/>ë¦¬í¬íŠ¸ ìƒì„±"]
            SlackCmdAPI["/slack/ai-report<br/>Slack ëª…ë ¹"]
        end

        subgraph "í•µì‹¬ ì„œë¹„ìŠ¤"
            LLMService[LLM Service<br/>OpenAI GPT-4]
            RAGService[RAG Service<br/>ê²€ìƒ‰ ì¦ê°• ìƒì„±]
            Retriever[Retriever<br/>ì‹œë§¨í‹± ê²€ìƒ‰]
            Personalizer[Personalizer<br/>ì‚¬ìš©ì ë§ì¶¤í™”]
            IngestService[Ingest Service<br/>ë¬¸ì„œ ì²˜ë¦¬]
            Analyzer[Analyzer<br/>ê°ì •/ì£¼ì œ ë¶„ì„]
            ConvLogger[Conversation Logger<br/>ëŒ€í™” ê¸°ë¡]
        end

        subgraph "ìœ í‹¸ë¦¬í‹°"
            ReportGen[Report Generator<br/>PDF ìƒì„±]
            SlackUploader[Slack Uploader<br/>íŒŒì¼ ì—…ë¡œë“œ]
            BackupMgr[Backup Manager<br/>DB ë°±ì—…]
            Monitor[System Monitor<br/>ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§]
        end
    end

    subgraph "ë°ì´í„° ì €ì¥ì†Œ"
        VectorDB[(Chroma VectorDB<br/>ë¬¸ì„œ ì„ë² ë”©)]
        PostgreSQL[(PostgreSQL<br/>Neon DB)]

        subgraph "DB í…Œì´ë¸”"
            ConvLog[conversation_log<br/>ëŒ€í™” ë‚´ì—­]
            FeedbackLog[feedback_log<br/>í”¼ë“œë°±]
        end
    end

    subgraph "ì™¸ë¶€ ì„œë¹„ìŠ¤"
        OpenAI[OpenAI API<br/>GPT-4 / Embeddings]
        Slack[Slack<br/>ì•Œë¦¼ & íŒŒì¼ ì—…ë¡œë“œ]
    end

    subgraph "ë¶„ì„ & ìš´ì˜"
        Dashboard[ğŸ“Š Streamlit Dashboard<br/>ì‹¤ì‹œê°„ ë¶„ì„]
        Scheduler[â° Scheduler<br/>ìë™í™” ì‘ì—…]
        Reports[ğŸ“„ Weekly Reports<br/>PDF ë¦¬í¬íŠ¸]
    end

    %% ========================================
    %% ë©”ì¸ í”Œë¡œìš°: ì‚¬ìš©ì ì±„íŒ…
    %% ========================================

    User -->|1. ì§ˆë¬¸| WebUI
    WebUI -->|2. API í˜¸ì¶œ| RAGChatAPI
    RAGChatAPI -->|3. RAG ìš”ì²­| RAGService
    RAGService -->|4. ì»¨í…ìŠ¤íŠ¸ ê²€ìƒ‰| Retriever
    Retriever -->|5. ì‹œë§¨í‹± ê²€ìƒ‰| VectorDB
    VectorDB -->|6. ê´€ë ¨ ë¬¸ì„œ ë°˜í™˜| Retriever
    Retriever -->|7. ë¬¸ì„œ ì „ë‹¬| RAGService
    RAGService -->|8. í”„ë¡¬í”„íŠ¸ êµ¬ì„±| LLMService
    LLMService -->|9. LLM í˜¸ì¶œ| OpenAI
    OpenAI -->|10. ì‘ë‹µ ìƒì„±| LLMService
    LLMService -->|11. ì‘ë‹µ ë°˜í™˜| RAGChatAPI
    RAGChatAPI -->|12. ëŒ€í™” ê¸°ë¡| ConvLogger
    ConvLogger -->|13. ì €ì¥| ConvLog
    RAGChatAPI -->|14. ì‘ë‹µ ì „ë‹¬| WebUI
    WebUI -->|15. ë‹µë³€ í‘œì‹œ| User

    %% ========================================
    %% ë¬¸ì„œ ì„ë² ë”© í”Œë¡œìš°
    %% ========================================

    User -.->|ë¬¸ì„œ ì—…ë¡œë“œ| IngestAPI
    IngestAPI -.->|ë¬¸ì„œ ì²˜ë¦¬| IngestService
    IngestService -.->|í…ìŠ¤íŠ¸ ë¶„í• | IngestService
    IngestService -.->|ì„ë² ë”© ìƒì„±| OpenAI
    IngestService -.->|ë²¡í„° ì €ì¥| VectorDB

    %% ========================================
    %% í”¼ë“œë°± & ë¶„ì„ í”Œë¡œìš°
    %% ========================================

    User -.->|ğŸ‘/ğŸ‘ í”¼ë“œë°±| FeedbackAPI
    FeedbackAPI -.->|í”¼ë“œë°± ì €ì¥| FeedbackLog

    ConvLog -.->|ë°°ì¹˜ ë¶„ì„| Analyzer
    Analyzer -.->|ê°ì • ë¶„ì„| OpenAI
    Analyzer -.->|ì£¼ì œ ì¶”ì¶œ| OpenAI
    Analyzer -.->|ê²°ê³¼ ì—…ë°ì´íŠ¸| ConvLog

    %% ========================================
    %% ë¦¬í¬íŒ… í”Œë¡œìš°
    %% ========================================

    ConvLog -.->|ë°ì´í„° ì¡°íšŒ| ReportGen
    FeedbackLog -.->|í”¼ë“œë°± í†µê³„| ReportGen
    ReportGen -.->|PDF ìƒì„±| Reports
    Reports -.->|íŒŒì¼ ì—…ë¡œë“œ| SlackUploader
    SlackUploader -.->|ì•Œë¦¼ ì „ì†¡| Slack

    %% ========================================
    %% Slack ëª…ë ¹ í”Œë¡œìš°
    %% ========================================

    SlackUser -->|/ai-report| Slack
    Slack -->|Slash Command| SlackCmdAPI
    SlackCmdAPI -.->|ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰| ReportGen
    ReportGen -.->|ë¦¬í¬íŠ¸ ìƒì„±| Reports
    Reports -.->|ì—…ë¡œë“œ| SlackUploader
    SlackUploader -.->|íŒŒì¼ & í†µê³„| Slack
    Slack -.->|ì•Œë¦¼ ìˆ˜ì‹ | SlackUser

    %% ========================================
    %% ëŒ€ì‹œë³´ë“œ & ëª¨ë‹ˆí„°ë§
    %% ========================================

    ConvLog -.->|ì‹¤ì‹œê°„ ì¡°íšŒ| Dashboard
    FeedbackLog -.->|í†µê³„ ë¶„ì„| Dashboard
    Dashboard -.->|ì‹œê°í™”| User

    PostgreSQL -.->|ì •ê¸° ë°±ì—…| BackupMgr
    BackupMgr -.->|ë°±ì—… ì•Œë¦¼| Slack

    Monitor -.->|ì‹œìŠ¤í…œ ìƒíƒœ| Slack

    %% ========================================
    %% ìŠ¤ì¼€ì¤„ëŸ¬ ìë™í™”
    %% ========================================

    Scheduler -.->|ë§¤ì¼ ìì •| BackupMgr
    Scheduler -.->|30ë¶„ë§ˆë‹¤| Monitor
    Scheduler -.->|ì£¼ê°„ ë¦¬í¬íŠ¸| ReportGen

    %% ========================================
    %% ìŠ¤íƒ€ì¼ë§
    %% ========================================

    classDef userClass fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    classDef apiClass fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef serviceClass fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef dbClass fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    classDef externalClass fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef utilClass fill:#fff9c4,stroke:#f57f17,stroke-width:2px

    class User,SlackUser,WebUI userClass
    class ChatAPI,RAGChatAPI,PersonalAPI,IngestAPI,FeedbackAPI,InsightsAPI,ReportAPI,SlackCmdAPI apiClass
    class LLMService,RAGService,Retriever,Personalizer,IngestService,Analyzer,ConvLogger serviceClass
    class VectorDB,PostgreSQL,ConvLog,FeedbackLog dbClass
    class OpenAI,Slack externalClass
    class ReportGen,SlackUploader,BackupMgr,Monitor,Dashboard,Scheduler,Reports utilClass
