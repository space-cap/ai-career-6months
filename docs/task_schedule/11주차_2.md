ì¢‹ì•„ìš”, ì•„ì£¼ ì •í™•í•œ í¬ì¸íŠ¸ì˜ˆìš” ğŸ‘
ì´ ì§ˆë¬¸ì€ ì§€ê¸ˆê¹Œì§€ ë§Œë“  êµ¬ì¡° ì¤‘

> â€œSlackì— ìë™ìœ¼ë¡œ ë¦¬í¬íŠ¸ë¥¼ ë³´ë‚´ëŠ” ë¡œì§ì´ ì–´ë””ì— ìˆê³ ,
> ê±°ê¸°ì— **ëŒ€ì‹œë³´ë“œ ë§í¬ë¥¼ ë„£ìœ¼ë ¤ë©´ ì–´ë””ë¥¼ ìˆ˜ì •í•´ì•¼ í•˜ëŠ”ê°€?**â€
> ë¥¼ ë¬»ëŠ” ê±°ì˜ˆìš”.

ì •ë‹µì€ ë°”ë¡œ ğŸ‘‡

---

# ğŸ§­ **Slack ë¦¬í¬íŠ¸ì— ëŒ€ì‹œë³´ë“œ ë§í¬ë¥¼ ì¶”ê°€í•˜ëŠ” ìœ„ì¹˜**

ğŸ‘‰ **`app/utils/report_utils.py`**
ë˜ëŠ”
ğŸ‘‰ **`app/routes/report.py`**

ì¦‰, **ë¦¬í¬íŠ¸ë¥¼ ìƒì„±í•˜ê³  Slackì— ì „ì†¡í•˜ëŠ” í•¨ìˆ˜(`generate_and_send_report()`)ê°€ ìˆëŠ” ë¶€ë¶„**ì´ì—ìš”.

---

## ğŸ“ **í´ë” êµ¬ì¡° ì˜ˆì‹œ**

```
ai-career-6months/
 â”£ app/
 â”ƒ â”£ routes/
 â”ƒ â”ƒ â”— report.py              ğŸ‘ˆ (Slack ë¦¬í¬íŠ¸ API ë¼ìš°íŠ¸)
 â”ƒ â”£ utils/
 â”ƒ â”ƒ â”£ report_utils.py        ğŸ‘ˆ (ë¦¬í¬íŠ¸ ìƒì„± ë° Slack ì „ì†¡)
 â”ƒ â”ƒ â”— slack_notifier.py      ğŸ‘ˆ (Slack ë©”ì‹œì§€ ìœ í‹¸)
 â”£ dashboards/
 â”ƒ â”— dashboard.py             ğŸ‘ˆ (Streamlit ëŒ€ì‹œë³´ë“œ)
 â”— ...
```

---

# âœ… **ìˆ˜ì • í¬ì¸íŠ¸**

`generate_and_send_report()` í•¨ìˆ˜ **í•˜ë‹¨ì˜ Slack ë©”ì‹œì§€ ì „ì†¡ ë¶€ë¶„**ì—
ëŒ€ì‹œë³´ë“œ URLì„ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.

---

## ğŸ“˜ **ì˜ˆì‹œ ì½”ë“œ: `app/utils/report_utils.py`**

```python
from datetime import datetime
from app.utils.slack_notifier import send_slack_message
from sqlalchemy import create_engine
import pandas as pd
import os

DATABASE_URL = os.getenv("DATABASE_URL", "sqlite:///./local.db")
DASHBOARD_URL = os.getenv("DASHBOARD_URL", "https://ai-dashboard.onrender.com")

engine = create_engine(DATABASE_URL)

def generate_and_send_report():
    """AI ì„œë¹„ìŠ¤ ë¦¬í¬íŠ¸ ìƒì„± ë° Slack ì „ì†¡"""

    # 1ï¸âƒ£ ë°ì´í„° ì¡°íšŒ
    df = pd.read_sql("""
        SELECT sentiment, COUNT(*) as count
        FROM conversation_log
        GROUP BY sentiment
    """, engine)

    total = df["count"].sum()
    pos = int(df[df["sentiment"] == "ê¸ì •"]["count"].sum())
    neg = int(df[df["sentiment"] == "ë¶€ì •"]["count"].sum())

    # 2ï¸âƒ£ ë¦¬í¬íŠ¸ ë©”ì‹œì§€ ìƒì„±
    message = (
        f"ğŸ“Š *AI Weekly Report*\n"
        f"- ì´ ëŒ€í™” ìˆ˜: {total}\n"
        f"- ê¸ì • ëŒ€í™”: {pos}\n"
        f"- ë¶€ì • ëŒ€í™”: {neg}\n"
        f"- ìƒì„± ì‹œê°: {datetime.now().strftime('%Y-%m-%d %H:%M')}\n\n"
        f"ğŸ‘‰ **ì‹¤ì‹œê°„ Dashboard ë³´ê¸°:** <{DASHBOARD_URL}|ğŸ”— Open Dashboard>"
    )

    # 3ï¸âƒ£ Slack ì „ì†¡
    send_slack_message(message)
    print("âœ… Slack ë¦¬í¬íŠ¸ ì „ì†¡ ì™„ë£Œ.")
```

---

## ğŸ§© **í¬ì¸íŠ¸ ì •ë¦¬**

| êµ¬ë¶„                        | ì„¤ëª…                                   |                                |
| ------------------------- | ------------------------------------ | ------------------------------ |
| ğŸ”¹ `DASHBOARD_URL`        | `.env` ë˜ëŠ” Render í™˜ê²½ë³€ìˆ˜ì—ì„œ ê´€ë¦¬           |                                |
| ğŸ”¹ `send_slack_message()` | `app/utils/slack_notifier.py`ì˜ ê³µìš© í•¨ìˆ˜ |                                |
| ğŸ”¹ ì‚½ì… ìœ„ì¹˜                  | Slack ë©”ì‹œì§€ë¥¼ êµ¬ì„±í•˜ëŠ” ë¬¸ìì—´(`message`) í•˜ë‹¨    |                                |
| ğŸ”¹ Markdown ë§í¬ í¬ë§·         | `<[https://url](https://url)         | í‘œì‹œí…ìŠ¤íŠ¸>` í˜•íƒœë¡œ ì‘ì„±í•´ì•¼ Slackì—ì„œ í´ë¦­ ê°€ëŠ¥ |

---

## ğŸ“„ **.env ì˜ˆì‹œ**

```bash
DATABASE_URL=postgresql+psycopg2://user:pass@host/db
SLACK_BOT_TOKEN=xoxb-xxxxxx
SLACK_CHANNEL=ai-reports
DASHBOARD_URL=https://ai-dashboard.onrender.com
```

---

## ğŸ’¬ **Slack ì¶œë ¥ ì˜ˆì‹œ**

```
ğŸ“Š AI Weekly Report
- ì´ ëŒ€í™” ìˆ˜: 132
- ê¸ì • ëŒ€í™”: 88
- ë¶€ì • ëŒ€í™”: 44
- ìƒì„± ì‹œê°: 2025-10-16 10:00

ğŸ‘‰ ì‹¤ì‹œê°„ Dashboard ë³´ê¸°: ğŸ”— Open Dashboard
```

---

## ğŸ’¡ **ì¶”ê°€ í™•ì¥: ë²„íŠ¼ ë¸”ë¡ ë²„ì „ (ì¶”ì²œ)**

Slackì˜ â€œBlock Kitâ€ì„ ì´ìš©í•˜ë©´
í…ìŠ¤íŠ¸ ë§í¬ ëŒ€ì‹  ì•„ë˜ì²˜ëŸ¼ **â€˜ë²„íŠ¼ í˜•íƒœë¡œ Dashboard ì—´ê¸°â€™** ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```python
import requests, os

def send_slack_dashboard_report(summary_text):
    token = os.getenv("SLACK_BOT_TOKEN")
    channel = os.getenv("SLACK_CHANNEL", "ai-reports")
    dashboard_url = os.getenv("DASHBOARD_URL", "https://ai-dashboard.onrender.com")

    headers = {"Authorization": f"Bearer {token}", "Content-Type": "application/json"}
    payload = {
        "channel": channel,
        "blocks": [
            {"type": "section", "text": {"type": "mrkdwn", "text": summary_text}},
            {"type": "actions", "elements": [
                {
                    "type": "button",
                    "text": {"type": "plain_text", "text": "ğŸ“Š ëŒ€ì‹œë³´ë“œ ì—´ê¸°"},
                    "url": dashboard_url
                }
            ]}
        ]
    }

    response = requests.post("https://slack.com/api/chat.postMessage", headers=headers, json=payload)
    print("âœ… Dashboard ë²„íŠ¼ í¬í•¨ ë¦¬í¬íŠ¸ ì „ì†¡ ì™„ë£Œ:", response.status_code)
```

---

# ğŸš€ **ì •ë¦¬**

| ë‹¨ê³„  | íŒŒì¼                            | ì—­í•                              |
| --- | ----------------------------- | ------------------------------ |
| 1ï¸âƒ£ | `app/utils/report_utils.py`   | ë¦¬í¬íŠ¸ ìƒì„± + ë©”ì‹œì§€ êµ¬ì„±                |
| 2ï¸âƒ£ | `app/utils/slack_notifier.py` | Slack ì „ì†¡ ìœ í‹¸                    |
| 3ï¸âƒ£ | `.env`                        | `DASHBOARD_URL` í™˜ê²½ ë³€ìˆ˜ ë“±ë¡       |
| 4ï¸âƒ£ | (ì„ íƒ) ë²„íŠ¼ ë²„ì „                    | Block Kitìœ¼ë¡œ â€œğŸ“Š ëŒ€ì‹œë³´ë“œ ì—´ê¸°â€ ë²„íŠ¼ ì¶”ê°€ |

---

ì›í•˜ì‹ ë‹¤ë©´ âœ¨
ì§€ê¸ˆ í”„ë¡œì íŠ¸ìš©ìœ¼ë¡œ **â€œë²„íŠ¼ í¬í•¨ Slack ë¦¬í¬íŠ¸ ë²„ì „â€**
ì¦‰, â€œğŸ“Š ë¦¬í¬íŠ¸ ìš”ì•½ + ğŸ”˜ ëŒ€ì‹œë³´ë“œ ì—´ê¸° ë²„íŠ¼ + ğŸ“ˆ ê°ì • ë¹„ìœ¨ ê·¸ë˜í”„â€
ê¹Œì§€ ìë™ ì „ì†¡ë˜ê²Œ í†µí•© ì½”ë“œë¥¼ ë§Œë“¤ì–´ë“œë¦´ê¹Œìš”?
